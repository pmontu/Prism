<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Gym Challenger</title>

    <!-- Bootstrap -->
    <link href="bower_components/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="bower_components/bootstrap/dist/css/bootstrap.css">
    <script src="bower_components/angular/angular.js"></script>
  </head>
  <body>
    <div class="container" ng-app="myApp" ng-controller="myCtrl">
      <div class="page-header">
      <h1>Challengymar<small>Add Challenge</small></h1>
      </div>

      <form class="form-horizontal">
		  <div class="form-group">
		    <label class="col-sm-2 control-label">Title</label>
		    <div class="col-sm-4">
		      <input type="text" class="form-control" placeholder="Title" ng-model="challenge.title">
		    </div>
		  </div>
		  <div class="form-group">
		    <label class="col-sm-2 control-label">Frequency</label>
		    <div class="col-sm-4">
		      <input type="number" class="form-control" placeholder="Frequency" ng-model="challenge.frequency">
		    </div>
		  </div>
		  <div class="form-group">
		    <label class="col-sm-2 control-label">Start Date</label>
		    <div class="col-sm-4">
		      <input type="date" class="form-control" ng-model="challenge.startdate">
		    </div>
		  </div>
		  <div class="form-group">
		    <label class="col-sm-2 control-label">Number of Days</label>
		    <div class="col-sm-4">
		      <input type="number" class="form-control" placeholder="Number of days" ng-model="challenge.numberofdays">
		    </div>
		  </div>
		  <div class="form-group">
		    <div class="col-sm-offset-2 col-sm-10">
		      <button type="submit" class="btn btn-default" ng-click="createChallenge()">Add</button>
		    </div>
		  </div>
		</form>
		<p class="bg-primary">Debugging: {{challenge}}</p>
    </div>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
    <script src="bower_components/bootstrap/dist/js/bootstrap.min.js"></script>
	<script>
	var app = angular.module('myApp', []);
	app.controller('myCtrl', function($scope, $http) {
		$scope.createChallenge = function(){
			$http.post("http://127.0.0.1:12345/challenge/add/", $scope.challenge).success(function(data){alert(data);}).error(function(){alert("error");});
		}
	});
	app.config(['$httpProvider', function($httpProvider) {
    $httpProvider.defaults.xsrfCookieName = 'csrftoken';
    $httpProvider.defaults.xsrfHeaderName = 'X-CSRFToken';
}]);
	</script>
  </body>
</html>